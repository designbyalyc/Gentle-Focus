<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preload" href="../assets/audio/456.mp3" as="audio">
    <meta name="description" content="Gentle Focus - A calm productivity experience">
    <link rel="dns-prefetch" href="https://cdn.pixabay.com">
  <title>Gentle Focus â€” A Calm Productivity Experience</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <!-- Focus Bubble Animation -->
  <div class="focus-bubble-container">
    <div class="focus-bubble" id="focusBubble"></div>
  </div>

  <!-- Audio Control -->
  <button class="audio-control" id="audioControl" aria-pressed="false" aria-label="Toggle ambient audio">ðŸ”‡ Unmute Audio</button>
  <audio id="ambientAudio" loop preload="auto" playsinline crossorigin="anonymous" muted>
    <source src="../assets/audio/456.mp3" type="audio/mpeg" />
    <source src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_4c0c6d718c.mp3" type="audio/mpeg" />
  </audio>

  <!-- <div class="container">
    <header>
      <h1>Gentle Focus â€” A Calm Productivity Experience</h1>
    </header>

    <!-- Conceptual Response -->
    <section>
      <h2>Conceptual Response</h2>
      <p><strong>Gentle Focus</strong> visualises calm concentration with a single Focus Bubble that moves gently
        across the screen and changes colour as time passes.</p>
      <p><strong>Prompt:</strong> Spatial Control | <strong>Technique:</strong> Date.now()</p>
      <p>It explores focus through soft motion and time-based colour feedback rather than pressure, encouraging
        presence and clarity.</p>
    </section>

    <!-- Visual Plan -->
    <section>
      <h2>Visual Plan / Sketches</h2>
      <div class="placeholder-image">
        <div class="placeholder-circle"></div>
        <div class="placeholder-circle"></div>
        <div class="placeholder-circle"></div>
      </div>
      <p class="caption">Visual plan showing Focus Bubble motion and colour transitions over time.</p>
    </section>

    <!-- Design References -->
    <section>
      <h2>Design References</h2>
      <ul>
        <li><a href="https://www.calm.com" class="reference-link" target="_blank">Calm App</a></li>
        <li><a href="https://www.youtube.com/watch?v=9gOUvaj87Y8" class="reference-link" target="_blank">Apple
            Breathe Animation (YouTube demo)</a></li>
        <li><a href="https://www.notion.so" class="reference-link" target="_blank">Notion Layouts</a></li>
      </ul>
    </section>

    <!-- Technical Approach -->
    <section>
      <h2>Technical Approach</h2>
      <ul>
        <li>Built with HTML, CSS and JavaScript</li>
        <li>Uses Spatial Control for the Focus Bubble's motion</li>
        <li>Applies Date.now() to control time-based colour gradients</li>
        <li>Integrates a soft ambient audio loop (mute/unmute optional)</li>
        <li>Responsive layout for desktop and mobile</li>
        <li>Deployed via GitHub Pages / Netlify</li>
      </ul>
    </section>

    <!-- System Map -->
    <section>
      <h2>System Map</h2>
      <div class="system-map">
        <div class="system-map-content">
          <span class="box">User</span>
          <span class="arrow">â†’</span>
          <span class="box">Focus Bubble</span>
          <span class="arrow">â†’</span>
          <span class="box">Date.now()</span>
          <span class="arrow">â†’</span>
          <span class="box">Colour State (+ Audio Layer)</span>
        </div>
      </div>
      <p class="caption">System Map â€” User â†’ Focus Bubble â†’ Date.now() â†’ Colour State (+ Audio Layer).</p>
    </section>

    <!-- Peer Testing Feedback -->
    <section>
      <h2>Peer Testing Feedback Summary</h2>
      <p>Participants described the experience as calming and aesthetically soft. The Focus Bubble's gentle
        motion helped them slow down mentally and refocus, while the gradual colour transitions were perceived
        as "peaceful" and "meditative."</p>
      <p>Most participants noted that the lack of text or clutter made the experience feel clean and
        distraction-free.</p>
      <p>A few suggested adding a small timer or text cue to represent elapsed focus time, but overall feedback
        was strongly positive toward its simplicity.</p>
      <p><strong>Key Insights:</strong></p>
      <ul>
        <li>The bubble's smooth spatial movement was effective in communicating calm.</li>
        <li>Users responded well to colour changes tied to time, describing them as "natural" and "ambient."</li>
        <li>Audio integration was subtle and enhanced immersion.</li>
      </ul>
    </section>

    <!-- Reflection Section -->
    <section>
      <h2>Reflection</h2>

      <div class="reflection-answer">
        <p class="question">1. What was your approach to animating the Focus Bubble and colour shift?</p>
        <p>I used smooth CSS transitions combined with JavaScript setInterval to move the bubble organically
          across the viewport. The colour shift utilizes HSL values driven by Date.now() modulo calculations,
          creating a continuous gradient cycle through pastel tones that feels natural and unforced.</p>
      </div>

      <div class="reflection-answer">
        <p class="question">2. How did you use Date.now() to connect visuals to time or mood?</p>
        <p>Date.now() maps to a three-phase color cycle representing time of day: morning (soft blues/purples),
          afternoon (warm oranges/yellows), and evening (deep purples/pinks). The 72-second cycle creates a
          meditative progression that gives users ambient feedback about passing time without explicit
          pressure, maintaining calm focus through natural color transitions.</p>
      </div>

      <div class="reflection-answer">
        <p class="question">3. What was most interesting about creating a calm interaction instead of a busy
          one?</p>
        <p>The challenge was resisting the urge to add more elements or faster animations. True calm comes from
          restraintâ€”one bubble, slow movements, minimal UI. It taught me that removing features can be more
          powerful than adding them when the goal is to reduce cognitive load.</p>
      </div>

      <div class="reflection-answer">
        <p class="question">4. If you had more time, what enhancement would you add?</p>
        <p>I would add subtle breathing-pace guidance where the bubble gently expands and contracts at 4-7-8
          breathing intervals, and implement localStorage to track cumulative focus sessions with a minimal,
          non-intrusive session counter that appears only on hover.</p>
      </div>
    </section>

    <!-- Design Rationale -->
    <section>
      <h2>Design Rationale</h2>
      <p>Research in cognitive psychology and HCI shows that subtle motion, ambient sound, and time-based
        feedback can help users sustain attention and reduce overload.</p>
      <p>Flow theory (Csikszentmihalyi, 1990) notes that gentle environmental cues can maintain focus without
        anxiety.</p>
      <p><strong>Gentle Focus</strong> applies these principles through spatial motion (the Focus Bubble) and temporal
        colour shifts (Date.now()) to encourage calm, intentional concentration.</p>
    </section>
  </div> -->

  <script>
    // Smooth Floating Focus Bubble Animation
    const bubble = document.getElementById("focusBubble");
    let x = window.innerWidth / 2 - 125;
    let y = window.innerHeight / 2 - 125;
    let dx = 0.6;
    let dy = 0.4;

    function animateBubble() {
      x += dx;
      y += dy;
      if (x <= 0 || x >= window.innerWidth - 250) dx *= -1;
      if (y <= 0 || y >= window.innerHeight - 250) dy *= -1;
      const hue = (Date.now() / 1500) % 360; // ~90s cycle
      bubble.style.transform = `translate(${x}px, ${y}px) scale(1.02)`;
      bubble.style.background = `radial-gradient(circle at center,
        hsl(${hue}, 85%, 75%),
        hsl(${(hue + 40) % 360}, 70%, 65%))`;
      bubble.style.boxShadow = `0 0 120px hsla(${hue}, 90%, 80%, 0.7),
                                0 0 160px hsla(${(hue + 40) % 360}, 70%, 70%, 0.4)`;
      requestAnimationFrame(animateBubble);
    }
    animateBubble();

    // Audio Control (iOS-friendly priming + mute/unmute toggle)
    const audio = document.getElementById("ambientAudio");
    const btn = document.getElementById("audioControl");
    audio.loop = true;
    audio.preload = "auto";
    audio.volume = 0.2;
    audio.muted = true; // start muted to respect autoplay rules
    let audioPrimed = false;

    function updateButtonState() {
      if (audio.muted) {
        btn.textContent = "ðŸ”‡ Unmute Audio";
        btn.setAttribute('aria-pressed', 'false');
      } else {
        btn.textContent = "ðŸ”Š Mute Audio";
        btn.setAttribute('aria-pressed', 'true');
      }
    }
    updateButtonState();

    // Prime audio on first user gesture to satisfy Safari autoplay
    function primeAudio() {
      if (audioPrimed) return;
      // play while muted to prime decoding and network buffering
      const p = audio.play();
      if (p && p.then) {
        p.then(() => {
          audioPrimed = true;
        }).catch(() => {
          // ignore play errors; some browsers block until user gesture
          audioPrimed = true;
        });
      } else {
        audioPrimed = true;
      }
      // remove listeners
      document.removeEventListener('pointerdown', primeAudio);
      document.removeEventListener('touchstart', primeAudio);
      document.removeEventListener('keydown', primeAudio);
    }
    document.addEventListener('pointerdown', primeAudio, { once: true });
    document.addEventListener('touchstart', primeAudio, { once: true });
    document.addEventListener('keydown', (e) => {
      if (e.key === ' ' || e.key === 'Enter') primeAudio();
    }, { once: true });

    // Toggle via mute/unmute for instant response on iOS
    btn.addEventListener("click", (e) => {
      e.preventDefault();
      // ensure audio primed before unmuting for Safari
      if (!audioPrimed) primeAudio();
      // toggle muted state
      audio.muted = !audio.muted;
      updateButtonState();
    });

    // Optional: ensure seamless loop fallback â€” if loop not supported, restart on ended
    audio.addEventListener('ended', () => {
      if (!audio.loop) {
        audio.currentTime = 0;
        audio.play().catch(()=>{});
      }
    });
  </script>

   <div class="elapsed-time" id="elapsedTime" role="timer" aria-label="Session duration">00:00</div>
</body>

</html>
